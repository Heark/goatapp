machine:
  environment:
    XCODE_SCHEME: "Placeholder"
    XCODE_PROJECT: "placeholder.xcodeproj"
general:
  branches:
    only:
    - master
dependencies:
  override:
    - npm cache clean
    - npm install -g ionic
    - npm install -g cordova
    - npm install -g bamlab/cordova-deploy
    - npm install
    - ionic state restore
    - ionic prepare
    - ./builds/sign-ios.sh
test:
  override:
    - echo "Do your tests here"

deployment:
  staging:
    branch: master
    commands:
      - cordova-deploy --build --android --ios --iosid $HOCKEY_IOS_APP_ID --apikey $HOCKEY_API_KEY --apk ./platforms/android/build/outputs/apk/android-debug.apk --andid  $HOCKEY_ANDROID_APP_ID --notes "Version générée automatiquement par $CIRCLE_USERNAME"
